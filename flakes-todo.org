* How to actually use this project
:PROPERTIES:
:ID:       822b312b-dedb-437f-880b-fdec9bf9f449
:END:
1. If envrc is broken (i.e. "No poetry executable found" when doing =M-x poetry s=), you have to reload direnv in this project.

   You can accomplish this through some black-magic combination of:

   - =envrc-allow=
   - =envrc-reload=
   - =cd= ing out of the directory in vterm and then back in again

2. Run =pyvenv-activate= and point it to the .venv directory here

   This is to make =run-python= look for the right executable

3. Use =run-python= to open the interpreter

   + Use =C-u run-python= to manually point to the right python interpreter if weird import errors occur

4. If poetry complains about incorrect versions, make sure that you have the correct version of python installed as required by =pyproject.toml=.

   As of [2023-09-28 Thu] this should be handled by the =pythonPkgs= import.
* Insane ramblings
:PROPERTIES:
:ID:       c91ac22f-ede3-4ab0-88e2-ce723f8cde04
:END:
This tree contains instructions for using weird install methods instead of just using poetry.
** +Making a nix-shell dev environment+
:PROPERTIES:
:ID:       1cb3fd6d-1bb2-4881-98f4-d654eb4494c2
:END:
*** The alternatives to poetry2nix don't work
:PROPERTIES:
:ID:       f3c76d29-6736-4217-af23-7f87bb4dd8a9
:END:
*** poetry2nix's mkPythonEnv
:PROPERTIES:
:ID:       c31bb74a-fb5a-483c-ac9a-49f39e760340
:END:
**** using the default.nix implementation from github
:PROPERTIES:
:ID:       8cb5d416-4d30-4644-8109-cb0d9e36e5e1
:END:
**** using it in a flake
:PROPERTIES:
:ID:       b7fbc3f1-1538-480d-9e83-027dd76e2ec1
:END:
Both of these methods run into a
#+begin_src bash
ModuleNotFoundError: No module named 'flit_core'
#+end_src
error, suggesting they are maybe equivalent.
***** Updating poetry2nix
:PROPERTIES:
:ID:       db8fd880-aa99-4dc7-8971-0b7522b33d00
:END:
I can specify specific commit hashes when inputting it as a flake, but I can't figure out how to reference mkPythonEnv as an attribute- I don't know what its path is
****** How to refer to mkPoetryEnv from the flake input
:PROPERTIES:
:ID:       b12db078-e1bb-4110-adb9-013084ebaf2d
:END:
******* Understand the outputs specification by reading about eachDefaultSystem
:PROPERTIES:
:ID:       bf5d14d4-0573-4f4e-84db-48d2514a0f4d
:END:
******* Some other way of locating the path
:PROPERTIES:
:ID:       cd1e761b-a3f1-403f-86b3-96b05da4efc0
:END:
**** Is the error fixed in poetry2nix or does it require a [[https://github.com/nix-community/poetry2nix/issues/568][workaround]]?
:PROPERTIES:
:ID:       9558a409-011a-4b50-9ef0-c120168b9433
:END:
***** Fixed in poetry2nix
:PROPERTIES:
:ID:       33dbdbb5-ac03-4fab-9e52-a3a734ac304f
:END:
****** Figure out how to use newest version
:PROPERTIES:
:ID:       a6b1685f-f727-4264-aee3-e7a4af42bc87
:END:
******* [?] understand "overlays"
:PROPERTIES:
:ID:       79a71528-e6e1-4d36-8143-1c8515772a1f
:END:
:LOGBOOK:
- State "[?]"        from              [2023-06-25 Sun 23:20]
:END:
******* [?] understand poetry2nix.overlay
:PROPERTIES:
:ID:       130c4015-8281-4af3-98a1-1f4afab35019
:END:
:LOGBOOK:
- State "[?]"        from              [2023-06-25 Sun 23:20]
:END:
****** [?] Implement the workaround
:PROPERTIES:
:ID:       65faac45-1fd2-412d-9932-6df24d4e4b0a
:END:
:LOGBOOK:
- State "[?]"        from              [2023-06-25 Sun 23:21]
:END:

******* [?] is this the right syntax: =pkgs.python310.flit-core=
:PROPERTIES:
:ID:       5c845643-e0d7-45b4-bbab-5a8b69b1514c
:END:
:LOGBOOK:
- State "[?]"        from              [2023-06-25 Sun 23:20]
:END:
******* [?]
:PROPERTIES:
:ID:       4cc797b3-dddb-41f3-859a-98b17b90738f
:END:
:LOGBOOK:
- State "[?]"        from              [2023-06-25 Sun 23:21]
:END:
** Current state of the project
:PROPERTIES:
:ID:       0847eced-7d6b-48af-bbeb-4871daf41289
:END:
There are several workarounds for errors presented [[https://github.com/nix-community/poetry2nix/blob/master/docs/edgecases.md][here]]. In general, for errors like:
#+begin_src bash
ModuleNotFoundError: No module named 'flit_core'
#+end_src
Fill out the =bd= snippet.

[2023-06-29 Thu 18:32] Stopping after a very long stretch of no progress. See the commit =25f4b7e= for the current state and possible future steps. Big big issues here.
** Tensorflow fail log
:PROPERTIES:
:ID:       4a6454a1-3c52-48a2-af6f-2c30afd8fbd6
:END:
:log:
/nix/store/nhzvgfpfw40k8627yv4gp46jynb2akfh-tensorflow-2.11.0.drv
@nix { "action": "setPhase", "phase": "unpackPhase" }
unpacking sources
unpacking source archive /nix/store/bx5sxw87vs9cpvcbqskpkasml2ip8pik-source
source root is source
@nix { "action": "setPhase", "phase": "patchPhase" }
patching sources
patching script interpreter paths in .
./third_party/gpus/crosstool/clang/bin/crosstool_wrapper_driver_is_not_gcc.tpl: interpreter >./third_party/gpus/crosstool/clang/bin/crosstool_wrapper_driver_rocm.tpl: interpreter direct>./tensorflow/go/test.sh: interpreter directive changed from "#!/usr/bin/env bash" to "/nix/s>./tensorflow/core/kernels/mlir_generated/build_test.sh: interpreter directive changed from ">@nix { "action": "setPhase", "phase": "unpackPhase" }
unpacking sources
unpacking source archive /nix/store/bx5sxw87vs9cpvcbqskpkasml2ip8pik-source
source root is source
@nix { "action": "setPhase", "phase": "patchPhase" }
patching sources
patching script interpreter paths in .
./third_party/gpus/crosstool/clang/bin/crosstool_wrapper_driver_is_not_gcc.tpl: interpreter >./third_party/gpus/crosstool/clang/bin/crosstool_wrapper_driver_rocm.tpl: interpreter direct>./tensorflow/go/test.sh: interpreter directive changed from "#!/usr/bin/env bash" to "/nix/s>./tensorflow/core/kernels/mlir_generated/build_test.sh: interpreter directive changed from ">./tensorflow/core/api_def/update_api_def.sh: interpreter directive changed from "#!/bin/bash>./tensorflow/python/tpu/client/pip_package/build_pip_package.sh: interpreter directive chang>./tensorflow/python/tpu/profiler/pip_package/build_pip_package.sh: interpreter directive cha>./tensorflow/python/debug/examples/v1/examples_v1_offline_analyzer_test.sh: interpreter dire>./tensorflow/python/debug/examples/v1/examples_v1_debug_errors_test.sh: interpreter directiv>./tensorflow/python/debug/examples/v1/examples_v1_debug_tflearn_iris_test.sh: interpreter di>./tensorflow/python/debug/examples/v1/examples_v1_debug_mnist_test.sh: interpreter directive>./tensorflow/python/debug/examples/v1/examples_v1_debug_keras_test.sh: interpreter directive>./tensorflow/python/debug/examples/v1/examples_v1_debug_fibonacci_test.sh: interpreter direc>./tensorflow/python/debug/examples/v1/examples_v1_test.sh: interpreter directive changed fro>./tensorflow/python/debug/examples/v2/examples_v2_test.sh: interpreter directive changed fro>./tensorflow/tools/tf_sig_build_dockerfiles/setup.python.sh: interpreter directive changed f>./tensorflow/tools/tf_sig_build_dockerfiles/setup.sources.sh: interpreter directive changed >./tensorflow/tools/tf_sig_build_dockerfiles/builder.devtoolset/fixlinks.sh: interpreter dire>./tensorflow/tools/tf_sig_build_dockerfiles/builder.devtoolset/build_devtoolset.sh: interpre>./tensorflow/tools/tf_sig_build_dockerfiles/builder.devtoolset/rpm-patch.sh: interpreter dir>./tensorflow/tools/tf_sig_build_dockerfiles/setup.packages.sh: interpreter directive changed>./tensorflow/tools/tf_sig_build_dockerfiles/devel.usertools/setup_venv_test.sh: interpreter >./tensorflow/tools/tf_sig_build_dockerfiles/devel.usertools/repack_libtensorflow.sh: interpr>./tensorflow/tools/tf_sig_build_dockerfiles/devel.usertools/get_test_list.sh: interpreter di>./tensorflow/tools/tf_sig_build_dockerfiles/devel.usertools/squash_testlogs.py: interpreter >./tensorflow/tools/tf_sig_build_dockerfiles/devel.usertools/rename_and_verify_wheels.sh: int>./tensorflow/tools/tf_sig_build_dockerfiles/setup.cuda.sh: interpreter directive changed fro>./tensorflow/tools/pip_package/build_pip_package.sh: interpreter directive changed from "#!/>./tensorflow/tools/gcs_test/gcs_smoke.sh: interpreter directive changed from "#!/usr/bin/env>./tensorflow/tools/gcs_test/gcs_smoke_wrapper.sh: interpreter directive changed from "#!/usr>./tensorflow/tools/lib_package/libtensorflow_test.sh: interpreter directive changed from "#!>./tensorflow/tools/lib_package/concat_licenses.sh: interpreter directive changed from "#!/us>./tensorflow/tools/lib_package/libtensorflow_java_test.sh: interpreter directive changed fro>./tensorflow/tools/android/test/gradlew: interpreter directive changed from "#!/usr/bin/env >./tensorflow/tools/dockerfiles/tests/build-gpu.sh: interpreter directive changed from "#!/us>./tensorflow/tools/dockerfiles/tests/build-mkl-horovod.sh: interpreter directive changed fro>./tensorflow/tools/dockerfiles/tests/import-onednn.sh: interpreter directive changed from "#>./tensorflow/tools/dockerfiles/tests/import-onednn-horovod.sh: interpreter directive changed>./tensorflow/tools/dockerfiles/tests/import-gpu.sh: interpreter directive changed from "#!/u>./tensorflow/tools/dockerfiles/tests/import.sh: interpreter directive changed from "#!/usr/b>./tensorflow/tools/dockerfiles/tests/build-cpu.sh: interpreter directive changed from "#!/us>./tensorflow/tools/ci_build/xla/linux/gpu/run_py3.sh: interpreter directive changed from "#!>./tensorflow/tools/ci_build/linux/libtensorflow_cpu.sh: interpreter directive changed from ">./tensorflow/tools/ci_build/linux/ppc64le/cpu/run_py3.sh: interpreter directive changed from>./tensorflow/tools/ci_build/linux/ppc64le/cpu/run_py2.sh: interpreter directive changed from>./tensorflow/tools/ci_build/linux/ppc64le/gpu/run_py3.sh: interpreter directive changed from>./tensorflow/tools/ci_build/linux/ppc64le/gpu/run_py2.sh: interpreter directive changed from>./tensorflow/tools/ci_build/linux/libtensorflow.sh: interpreter directive changed from "#!/u>./tensorflow/tools/ci_build/linux/cmake/run.sh: interpreter directive changed from "#!/usr/b>./tensorflow/tools/ci_build/linux/mkl/basic-mkl-test.sh: interpreter directive changed from >./tensorflow/tools/ci_build/linux/mkl/build-dev-container.sh: interpreter directive changed >./tensorflow/tools/ci_build/linux/mkl/install_openmpi_horovod.sh: interpreter directive chan>./tensorflow/tools/ci_build/linux/mkl/basic-mkl-gpu-test.sh: interpreter directive changed f>./tensorflow/tools/ci_build/linux/cpu/run_py3_contrib.sh: interpreter directive changed from>./tensorflow/tools/ci_build/linux/cpu/run_mkl.sh: interpreter directive changed from "#!/usr>./tensorflow/tools/ci_build/linux/cpu/run_py2_core.sh: interpreter directive changed from "#>./tensorflow/tools/ci_build/linux/cpu/run_cc_core.sh: interpreter directive changed from "#!>./tensorflow/tools/ci_build/linux/cpu/run_py3_core.sh: interpreter directive changed from "#>./tensorflow/tools/ci_build/linux/libtensorflow_rocm.sh: interpreter directive changed from >./tensorflow/tools/ci_build/linux/rocm/run_gpu_single.sh: interpreter directive changed from>./tensorflow/tools/ci_build/linux/rocm/rocm_py36_pip.sh: interpreter directive changed from >./tensorflow/tools/ci_build/linux/rocm/run_gpu_multi.sh: interpreter directive changed from >...skipping...
[145 / 3,853] Compiling absl/time/internal/cctz/src/time_zone_info.cc; 2s local ... (16 acti>[221 / 4,172] Compiling llvm/lib/Demangle/MicrosoftDemangleNodes.cpp; 1s local ... (16 actio>[231 / 4,172] Compiling mlir/tools/mlir-tblgen/AttrOrTypeDefGen.cpp; 4s local ... (16 action>[245 / 4,172] Compiling mlir/tools/mlir-tblgen/AttrOrTypeDefGen.cpp; 7s local ... (16 action>[263 / 4,172] Compiling mlir/tools/mlir-tblgen/OpDefinitionsGen.cpp; 10s local ... (16 actio>[289 / 4,172] Compiling mlir/tools/mlir-tblgen/OpDefinitionsGen.cpp; 14s local ... (16 actio>[326 / 4,172] Compiling llvm/lib/Support/ItaniumManglingCanonicalizer.cpp; 4s local ... (16 >[365 / 4,172] Compiling llvm/lib/Support/ItaniumManglingCanonicalizer.cpp; 9s local ... (16 >[402 / 4,172] Compiling llvm/lib/Support/CommandLine.cpp; 10s local ... (16 actions, 15 runn>[472 / 4,778] Compiling llvm/lib/Support/VirtualFileSystem.cpp; 10s local ... (16 actions, 1>[555 / 5,117] Compiling mlir/lib/Tools/PDLL/Parser/Parser.cpp; 7s local ... (16 actions, 15 >[1,088 / 5,117] Compiling llvm/utils/TableGen/AsmMatcherEmitter.cpp; 13s local ... (16 actio>[1,112 / 5,117] Compiling mlir/lib/Dialect/SparseTensor/IR/SparseTensorDialect.cpp; 15s loca>[1,147 / 5,117] Compiling mlir/lib/IR/BuiltinAttributes.cpp; 18s local ... (16 actions, 15 r>[1,185 / 5,117] Compiling llvm/utils/TableGen/GlobalISelEmitter.cpp; 14s local ... (16 actio>[1,285 / 5,117] Compiling llvm/lib/Support/ItaniumManglingCanonicalizer.cpp; 3s local ... (1>[1,496 / 5,310] Compiling mlir/tools/mlir-linalg-ods-gen/mlir-linalg-ods-yaml-gen.cpp; 12s l>[1,648 / 5,349] Compiling mlir/lib/IR/BuiltinAttributes.cpp; 22s local ... (16 actions, 15 r>[1,717 / 5,349] Compiling tensorflow/core/ir/ops.cc; 40s local ... (16 actions running)
[1,767 / 5,349] Compiling mlir/lib/Dialect/LLVMIR/IR/LLVMIntrinsicOps.cpp; 42s local ... (16>[1,831 / 5,349] Compiling tensorflow/compiler/xla/mlir_hlo/lib/Dialect/thlo/IR/thlo_ops.cc; >[1,879 / 5,349] Compiling tensorflow/compiler/xla/mlir_hlo/lib/Dialect/mhlo/transforms/legal>[1,976 / 5,349] Compiling mlir/lib/Dialect/Linalg/IR/LinalgOps.cpp; 39s local ... (16 action>[2,173 / 5,350] Compiling mlir/lib/Dialect/LLVMIR/IR/LLVMDialect.cpp; 76s local ... (16 acti>[2,334 / 5,350] Compiling mlir/lib/Dialect/Arith/IR/ArithOps.cpp; 29s local ... (16 actions,>[2,502 / 5,350] Compiling tensorflow/compiler/xla/mlir_hlo/lib/Dialect/lhlo/IR/lhlo_ops.cc; >[2,681 / 5,350] Compiling src/cpu/rnn/ref_rnn.cpp; 28s local ... (16 actions, 15 running)
[2,961 / 5,686] Compiling stablehlo/dialect/ChloOps.cpp; 40s local ... (16 actions, 15 runni>[3,186 / 5,686] Compiling stablehlo/dialect/StablehloOps.cpp; 53s local ... (16 actions, 15 >[3,463 / 5,686] Compiling tensorflow/compiler/xla/mlir_hlo/lib/Dialect/mhlo/IR/hlo_ops.cc; 9>[3,728 / 5,686] Compiling tensorflow/compiler/xla/service/hlo_parser.cc; 44s local ... (16 a>[3,883 / 5,686] Compiling tensorflow/core/util/batch_util.cc; 59s local ... (16 actions, 15 >[4,092 / 5,686] Compiling tensorflow/compiler/mlir/tensorflow/ir/tf_ops_n_z.cc; 159s local .>/nix/store/sw36plhp82916wwg6i6097rkzza7d950-stdenv-linux/setup: line 1638:  6042 Killed     >
:END:
* Website TODO
:PROPERTIES:
:ID:       70f6f63f-7d29-4bf3-b079-4a6bbc11c729
:END:
** DONE [#A] Bigger, centered canvas
CLOSED: [2023-10-10 Tue 04:45]
:PROPERTIES:
:ID:       9d92792c-05fd-4f39-bb0d-2910cd5dbcde
:END:
:LOGBOOK:
- State "DONE"       from              [2023-10-10 Tue 04:45]
:END:

** DONE [#A] Scale down submitted image nicely :ATTACH:
CLOSED: [2023-10-10 Tue 04:45]
:PROPERTIES:
:ID:       d17e9448-df4a-4b2a-b811-6a6c38c1bee4
:ORG_ATTACH_FILES: performance.png
:END:
:LOGBOOK:
- Note taken on [2023-10-10 Tue 04:45] \\
  Actually just retraining the model for a bigger size- with great results!
 [[file:~/scratch-nondropbox/org/.attach/d1/7e9448-df4a-4b2a-b811-6a6c38c1bee4/performance.png]]
- State "DONE"       from              [2023-10-10 Tue 04:45]
:END:


** [#C] Navbar stuff
:PROPERTIES:
:ID:       ee026875-643c-4283-adb9-a57ed2fab5ba
:END:
** TODO Clean up the wording of this document
:PROPERTIES:
:ID:       abd5e7ec-600a-412f-835b-90119fa22123
:END:
:LOGBOOK:
- Refiled on [2023-10-10 Tue 04:45]
- State "TODO"       from              [2023-10-10 Tue 04:44]
:END:
