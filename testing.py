import matplotlib.pyplot as plt
import numpy as np
import os
import PIL
import PIL.Image
import tensorflow as tf
import pathlib

from tensorflow import keras
from keras import layers
from keras.models import Sequential

model = keras.models.load_model(
    "/home/shortcut/git/untexify/frontend/untexifyweb/testapp/static/testapp/webmodel/"
)
class_names = [
    "$$<$$",
    "$$>$$",
    "$$\\Delta$$",
    "$$\\Gamma$$",
    "$$\\Lambda$$",
    "$$\\Omega$$",
    "$$\\Phi$$",
    "$$\\Pi$$",
    "$$\\Psi$$",
    "$$\\Sigma$$",
    "$$\\Theta$$",
    "$$\\Upsilon$$",
    "$$\\Xi$$",
    "$$\\alpha$$",
    "$$\\amalg$$",
    "$$\\approx$$",
    "$$\\ast$$",
    "$$\\asymp$$",
    "$$\\beta$$",
    "$$\\bigcirc$$",
    "$$\\bigtriangledown$$",
    "$$\\bigtriangleup$$",
    "$$\\bowtie$$",
    "$$\\bullet$$",
    "$$\\cap$$",
    "$$\\cdot$$",
    "$$\\chi$$",
    "$$\\circ$$",
    "$$\\cong$$",
    "$$\\cup$$",
    "$$\\dagger$$",
    "$$\\dashv$$",
    "$$\\ddagger$$",
    "$$\\delta$$",
    "$$\\diamond$$",
    "$$\\digamma$$",
    "$$\\div$$",
    "$$\\doteq$$",
    "$$\\emptyset$$",
    "$$\\epsilon$$",
    "$$\\equiv$$",
    "$$\\eta$$",
    "$$\\frown$$",
    "$$\\gamma$$",
    "$$\\geq$$",
    "$$\\geqslant$$",
    "$$\\gg$$",
    "$$\\ggg$$",
    "$$\\gnapprox$$",
    "$$\\gneq$$",
    "$$\\gneqq$$",
    "$$\\gnsim$$",
    "$$\\gvertneqq$$",
    "$$\\in$$",
    "$$\\iota$$",
    "$$\\kappa$$",
    "$$\\lambda$$",
    "$$\\leq$$",
    "$$\\leqslant$$",
    "$$\\ll$$",
    "$$\\lll$$",
    "$$\\lnapprox$$",
    "$$\\lneq$$",
    "$$\\lneqq$$",
    "$$\\lnsim$$",
    "$$\\lvertneqq$$",
    "$$\\mathbb$$",
    "$$\\mathbb{A}$$",
    "$$\\mathbb{C}$$",
    "$$\\mathbb{H}$$",
    "$$\\mathbb{N}$$",
    "$$\\mathbb{O}$$",
    "$$\\mathbb{Q}$$",
    "$$\\mathbb{R}$$",
    "$$\\mathbb{S}$$",
    "$$\\mathbb{Z}$$",
    "$$\\mid$$",
    "$$\\models$$",
    "$$\\mp$$",
    "$$\\mu$$",
    "$$\\nVDash$$",
    "$$\\nVdash$$",
    "$$\\ncong$$",
    "$$\\neg$$",
    "$$\\neq$$",
    "$$\\ngeq$$",
    "$$\\ngeqq$$",
    "$$\\ngeqslant$$",
    "$$\\ngtr$$",
    "$$\\ni$$",
    "$$\\nleq$$",
    "$$\\nleqq$$",
    "$$\\nleqslant$$",
    "$$\\nless$$",
    "$$\\nmid$$",
    "$$\\not$$",
    "$$\\not\\in$$",
    "$$\\not\\subset$$",
    "$$\\not\\supset$$",
    "$$\\notin$$",
    "$$\\nparallel$$",
    "$$\\nprec$$",
    "$$\\npreceq$$",
    "$$\\nshortmid$$",
    "$$\\nshortparallel$$",
    "$$\\nsim$$",
    "$$\\nsubseteq$$",
    "$$\\nsubseteqq$$",
    "$$\\nsucc$$",
    "$$\\nsucceq$$",
    "$$\\nsupseteq$$",
    "$$\\nsupseteqq$$",
    "$$\\ntriangleleft$$",
    "$$\\ntrianglelefteq$$",
    "$$\\ntriangleright$$",
    "$$\\ntrianglerighteq$$",
    "$$\\nu$$",
    "$$\\nvDash$$",
    "$$\\nvdash$$",
    "$$\\odot$$",
    "$$\\omega$$",
    "$$\\ominus$$",
    "$$\\oplus$$",
    "$$\\oslash$$",
    "$$\\otimes$$",
    "$$\\parallel$$",
    "$$\\perp$$",
    "$$\\phi$$",
    "$$\\pi$$",
    "$$\\pm$$",
    "$$\\prec$$",
    "$$\\preceq$$",
    "$$\\precnapprox$$",
    "$$\\precneqq$$",
    "$$\\precnsim$$",
    "$$\\propto$$",
    "$$\\psi$$",
    "$$\\rho$$",
    "$$\\setminus$$",
    "$$\\sigma$$",
    "$$\\sim$$",
    "$$\\simeq$$",
    "$$\\smile$$",
    "$$\\sqcap$$",
    "$$\\sqcup$$",
    "$$\\sqsubset$$",
    "$$\\sqsubseteq$$",
    "$$\\sqsupset$$",
    "$$\\sqsupseteq$$",
    "$$\\star$$",
    "$$\\subset$$",
    "$$\\subseteq$$",
    "$$\\subsetneq$$",
    "$$\\subsetneqq$$",
    "$$\\succ$$",
    "$$\\succeq$$",
    "$$\\succnapprox$$",
    "$$\\succneqq$$",
    "$$\\succnsim$$",
    "$$\\supset$$",
    "$$\\supseteq$$",
    "$$\\supsetneq$$",
    "$$\\supsetneqq$$",
    "$$\\tau$$",
    "$$\\theta$$",
    "$$\\times$$",
    "$$\\triangleleft$$",
    "$$\\triangleright$$",
    "$$\\uplus$$",
    "$$\\upsilon$$",
    "$$\\varepsilon$$",
    "$$\\varkappa$$",
    "$$\\varnothing$$",
    "$$\\varphi$$",
    "$$\\varpi$$",
    "$$\\varrho$$",
    "$$\\varsigma$$",
    "$$\\varsubsetneq$$",
    "$$\\varsubsetneqq$$",
    "$$\\varsupsetneq$$",
    "$$\\varsupsetneqq$$",
    "$$\\vartheta$$",
    "$$\\vdash$$",
    "$$\\vee$$",
    "$$\\wedge$$",
    "$$\\wr$$",
    "$$\\xi$$",
    "$$\\zeta$$",
]


image = tf.keras.utils.load_img("myinput.png", color_mode="grayscale")
image_array = tf.keras.utils.img_to_array(image)
img_array = tf.expand_dims(image_array, 0)
class_names[np.argmax(tf.nn.softmax(model(img_array)))]
